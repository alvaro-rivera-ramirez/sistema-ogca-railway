import{s as U,aq as X,o as d,r as m,q as F,v as O,ao as R,T as L,j as s,w,x as G,ar as ue,l as W,k as q,a as z,as as me,ah as ye,U as he,ae as Z,m as ge,K as j,i as se,y as xe,P as g,z as ee,I as k,C as fe,M as E,u as ve,B as be,S as Ie,at as Ce,A as je,au as te}from"./index-9512049a.js";import{T as oe,a as A}from"./TableRow-f77894bb.js";import{L as Se}from"./label-6573ce96.js";import{u as $e}from"./use-router-6243e8e3.js";import{T as Ae,t as Le}from"./Tooltip-5c15c2e5.js";import{a as v,S as Te}from"./Modal-5cc5ed01.js";import{A as Pe}from"./Autocomplete-f91b5d70.js";import{T as Re}from"./TextField-14413577.js";import{i as we,L as Ue}from"./Menu-7d48820f.js";import{B as Ne}from"./Button-fd147fd1.js";const ke=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Oe=e=>{const{classes:t,inset:o,primary:n,secondary:i,dense:l}=e;return G({root:["root",o&&"inset",l&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},ue,t)},Me=U("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${X.primary}`]:t.primary},{[`& .${X.secondary}`]:t.secondary},t.root,o.inset&&t.inset,o.primary&&o.secondary&&t.multiline,o.dense&&t.dense]}})(({ownerState:e})=>d({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),Be=m.forwardRef(function(t,o){const n=F({props:t,name:"MuiListItemText"}),{children:i,className:l,disableTypography:r=!1,inset:p=!1,primary:u,primaryTypographyProps:y,secondary:x,secondaryTypographyProps:f}=n,b=O(n,ke),{dense:I}=m.useContext(R);let a=u??i,c=x;const C=d({},n,{disableTypography:r,inset:p,primary:!!a,secondary:!!c,dense:I}),h=Oe(C);return a!=null&&a.type!==L&&!r&&(a=s.jsx(L,d({variant:I?"body2":"body1",className:h.primary,component:y!=null&&y.variant?void 0:"span",display:"block"},y,{children:a}))),c!=null&&c.type!==L&&!r&&(c=s.jsx(L,d({variant:"body2",className:h.secondary,color:"text.secondary",display:"block"},f,{children:c}))),s.jsxs(Me,d({className:w(h.root,l),ownerState:C,ref:o},b,{children:[a,c]}))}),ze=Be;function Ee(e){return W("MuiListItemAvatar",e)}q("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Fe=["className"],Ge=e=>{const{alignItems:t,classes:o}=e;return G({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Ee,o)},Ve=U("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({ownerState:e})=>d({minWidth:56,flexShrink:0},e.alignItems==="flex-start"&&{marginTop:8})),_e=m.forwardRef(function(t,o){const n=F({props:t,name:"MuiListItemAvatar"}),{className:i}=n,l=O(n,Fe),r=m.useContext(R),p=d({},n,{alignItems:r.alignItems}),u=Ge(p);return s.jsx(Ve,d({className:w(u.root,i),ownerState:p,ref:o},l))}),De=_e;function We(e){return W("MuiListItem",e)}const qe=q("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),P=qe;function He(e){return W("MuiListItemSecondaryAction",e)}q("MuiListItemSecondaryAction",["root","disableGutters"]);const Ye=["className"],Ke=e=>{const{disableGutters:t,classes:o}=e;return G({root:["root",t&&"disableGutters"]},He,o)},Je=U("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.disableGutters&&t.disableGutters]}})(({ownerState:e})=>d({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),ne=m.forwardRef(function(t,o){const n=F({props:t,name:"MuiListItemSecondaryAction"}),{className:i}=n,l=O(n,Ye),r=m.useContext(R),p=d({},n,{disableGutters:r.disableGutters}),u=Ke(p);return s.jsx(Je,d({className:w(u.root,i),ownerState:p,ref:o},l))});ne.muiName="ListItemSecondaryAction";const Qe=ne,Xe=["className"],Ze=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],et=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters,!o.disablePadding&&t.padding,o.button&&t.button,o.hasSecondaryAction&&t.secondaryAction]},tt=e=>{const{alignItems:t,button:o,classes:n,dense:i,disabled:l,disableGutters:r,disablePadding:p,divider:u,hasSecondaryAction:y,selected:x}=e;return G({root:["root",i&&"dense",!r&&"gutters",!p&&"padding",u&&"divider",l&&"disabled",o&&"button",t==="flex-start"&&"alignItemsFlexStart",y&&"secondaryAction",x&&"selected"],container:["container"]},We,n)},st=U("div",{name:"MuiListItem",slot:"Root",overridesResolver:et})(({theme:e,ownerState:t})=>d({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&d({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${me.root}`]:{paddingRight:48}},{[`&.${P.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${P.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:z(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${P.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:z(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${P.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:z(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:z(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),ot=U("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),nt=m.forwardRef(function(t,o){const n=F({props:t,name:"MuiListItem"}),{alignItems:i="center",autoFocus:l=!1,button:r=!1,children:p,className:u,component:y,components:x={},componentsProps:f={},ContainerComponent:b="li",ContainerProps:{className:I}={},dense:a=!1,disabled:c=!1,disableGutters:C=!1,disablePadding:h=!1,divider:V=!1,focusVisibleClassName:re,secondaryAction:H,selected:ie=!1,slotProps:ce={},slots:le={}}=n,de=O(n.ContainerProps,Xe),pe=O(n,Ze),Y=m.useContext(R),_=m.useMemo(()=>({dense:a||Y.dense||!1,alignItems:i,disableGutters:C}),[i,Y.dense,a,C]),D=m.useRef(null);ye(()=>{l&&D.current&&D.current.focus()},[l]);const T=m.Children.toArray(p),K=T.length&&we(T[T.length-1],["ListItemSecondaryAction"]),M=d({},n,{alignItems:i,autoFocus:l,button:r,dense:_.dense,disabled:c,disableGutters:C,disablePadding:h,divider:V,hasSecondaryAction:K,selected:ie}),J=tt(M),Q=he(D,o),B=le.root||x.Root||st,N=ce.root||f.root||{},S=d({className:w(J.root,N.className,u),disabled:c},pe);let $=y||"li";return r&&(S.component=y||"div",S.focusVisibleClassName=w(P.focusVisible,re),$=ge),K?($=!S.component&&!y?"div":$,b==="li"&&($==="li"?$="div":S.component==="li"&&(S.component="div")),s.jsx(R.Provider,{value:_,children:s.jsxs(ot,d({as:b,className:w(J.container,I),ref:Q,ownerState:M},de,{children:[s.jsx(B,d({},N,!Z(B)&&{as:$,ownerState:d({},M,N.ownerState)},S,{children:T})),T.pop()]}))})):s.jsx(R.Provider,{value:_,children:s.jsxs(B,d({},N,{as:$,ref:Q},!Z(B)&&{ownerState:d({},M,N.ownerState)},S,{children:[T,H&&s.jsx(Qe,{children:H})]}))})}),at=nt,ae=`${j}/v1/survey`,Lt=async(e,t="",o="",n="",i="",l="")=>{let r=new URL(ae);t&&r.searchParams.set("page",t),o&&r.searchParams.set("limit",o),n.trim()!==""&&r.searchParams.set("search",n),i&&r.searchParams.set("institute",i),l&&r.searchParams.set("module",l);const p={headers:{Authorization:`Bearer ${e}`}};return console.log(r.toString()),(await v.get(r.toString(),p)).data},rt=async(e,t)=>{const o={headers:{Authorization:`Bearer ${t}`}};return(await v.get(`${j}/v1/survey/${e}/users`,o)).data},it=async(e,t,o)=>{const n={headers:{Authorization:`Bearer ${o}`}};return await v.post(`${j}/v1/survey/${e}/users`,{users:[...t]},n,{headers:{"Content-Type":"application/json"}})},Tt=async(e,t)=>{const o={headers:{Authorization:`Bearer ${t}`}};return(await v.get(`${j}/v1/survey/${e}/info/`,o)).data},Pt=async(e,t,o,n=null)=>{try{const i=new FormData;if(n)for(const r of n)i.append("attached",r);const l={headers:{Authorization:`Bearer ${t}`}};return await v.post(`${j}/v1/survey/${e}/info`,o,l,{headers:{"Content-Type":"application/json"}}),await v.post(`${j}/v1/survey/${e}/file`,i,l),{message:"Ficha enviada con exito"}}catch(i){throw new Error(i)}},Rt=async(e,t=null)=>{let o=new URL(`${ae}/summary`);t&&o.searchParams.set("module",t);const n={headers:{Authorization:`Bearer ${e}`}};return(await v.get(o.toString(),n)).data},wt=async(e,t,o)=>{const n={headers:{Authorization:`Bearer ${t}`}};return await v.patch(`${j}/v1/survey/${e}/status`,{status:o},n,{headers:{"Content-Type":"application/json"}})},ct=se(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info"),lt=se(s.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function dt(){return s.jsx(oe,{children:s.jsx(A,{align:"center",colSpan:6,sx:{py:3},children:s.jsxs(xe,{sx:{textAlign:"center"},children:[s.jsx(L,{variant:"h6",paragraph:!0,children:"Lo sentimos!"}),s.jsx(L,{variant:"body2",children:"No se ha encontrado fichas en esta sección."})]})})})}dt.propTypes={query:g.string};g.number,g.number;const pt=U(({className:e,...t})=>s.jsx(Ae,{...t,classes:{popper:e}}))(({theme:e})=>({[`& .${Le.tooltip}`]:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}));function ut({uuidSurvey:e,code:t,meansVerification:o,condition:n,component:i,indicator:l,institute:r,isSend:p,status:u,handleOpenModal:y}){const[x,f]=m.useState(null),b=$e(),I=h=>{f(h.currentTarget)},a=()=>{f(null)},c=(h,V)=>{y(h,V),a()},C=h=>{a(),b.push(`/ficha?code=${h}`)};return s.jsxs(s.Fragment,{children:[s.jsxs(oe,{hover:!0,tabIndex:-1,children:[s.jsx(A,{children:t}),s.jsx(A,{children:o}),s.jsx(A,{children:r}),s.jsx(A,{align:"center",children:p?"Si":"No"}),s.jsx(A,{children:s.jsx(Se,{color:u==0?"warning":u==1?"success":"error",children:u==0?"Pendiente":u==1?"Confirmado":"Observado"})}),s.jsxs(A,{align:"right",children:[s.jsx(pt,{title:s.jsxs(s.Fragment,{children:[s.jsx(L,{color:"inherit",children:"Información"}),s.jsx("b",{children:"Condicion:"}),n,s.jsx("br",{}),s.jsx("b",{children:"Componente:"}),i,s.jsx("br",{}),s.jsx("b",{children:"Indicador:"}),l]}),children:s.jsx(ee,{children:s.jsx(ct,{})})}),s.jsx(ee,{onClick:I,children:s.jsx(k,{icon:"eva:more-vertical-fill"})})]})]}),s.jsxs(fe,{open:!!x,anchorEl:x,onClose:a,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:[s.jsxs(E,{onClick:()=>c("COMPARTIR",e),children:[s.jsx(k,{icon:"material-symbols:share-outline",sx:{mr:2}}),"Share"]}),s.jsxs(E,{onClick:()=>C(e),children:[s.jsx(k,{icon:"carbon:view-filled",sx:{mr:2}}),"Ver"]}),s.jsxs(E,{onClick:()=>c("EDITAR",e),children:[s.jsx(k,{icon:"eva:edit-fill",sx:{mr:2}}),"Editar"]}),s.jsxs(E,{onClick:a,sx:{color:"error.main"},children:[s.jsx(k,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Eliminar"]})]})]})}ut.propTypes={isSend:g.any,meansVerification:g.any,condition:g.any,component:g.any,indicator:g.any,code:g.any,institute:g.any,status:g.number};const mt=`${j}/v1/user`,yt=async(e,t=1,o=10,n="",i)=>{const l={headers:{Authorization:`Bearer ${e}`}};return(await v.get(`${mt}/without-access/survey/${i}?page=${t}&limit=${o}&search=${n}`,l)).data},ht=({code:e})=>{const[t,o]=m.useState([]),[n,i]=m.useState([]),[l,r]=m.useState([]),[p,u]=m.useState(""),{accessToken:y}=ve();async function x(){try{const{users:a}=await yt(y,1,10,p,e);i(a)}catch(a){console.error(a)}}async function f(a){try{const c=await rt(a,y);o(c)}catch(c){console.error(c)}}async function b(){try{await it(e,l,y),u(""),r([]),f(e)}catch(a){console.log(a)}}m.useEffect(()=>{x()},[p]),m.useEffect(()=>{f(e)},[]);const I=(a,c)=>{console.log(a),r(c)};return s.jsxs(s.Fragment,{children:[s.jsx(Pe,{multiple:!0,limitTags:3,sx:{width:"500px",paddingTop:1},getOptionLabel:a=>`${a.nameUser} ${a.lastnameUser}`,options:n.length>0?n:[],inputValue:p,onInputChange:(a,c)=>{u(c)},value:l,onChange:I,noOptionsText:"No se ha encontrado usuarios",renderInput:a=>s.jsx(Re,{...a,variant:"outlined",label:"Buscar usuario"}),isOptionEqualToValue:(a,c)=>a.userId===c.userId,renderOption:(a,c)=>m.createElement(be,{component:"li",...a,key:c.userId,value:c.userId},c.nameUser," ",c.lastnameUser)}),t.length>0&&s.jsx(Ue,{sx:{pt:0},children:t.map(({user:a})=>s.jsx(gt,{email:a.emailUser},a.userId))}),s.jsx(Ie,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,sx:{paddingTop:"8px"},children:s.jsx(Ne,{variant:"contained",endIcon:s.jsx(Te,{}),onClick:b,style:{backgroundColor:"#1565C0",color:"white"},children:"Guardar"})})]})},gt=({email:e})=>s.jsx(at,{disableGutters:!0,children:s.jsxs(Ce,{children:[s.jsx(De,{children:s.jsx(je,{sx:{bgcolor:te[100],color:te[600]},children:s.jsx(lt,{})})}),s.jsx(ze,{primary:e})]})},e),Ut=ht;export{ut as S,dt as T,Ut as a,Lt as b,Tt as c,wt as d,Rt as g,Pt as s};
